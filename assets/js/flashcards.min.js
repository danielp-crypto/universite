<script>const generateBtn=document.getElementById('generateBtn');const flashcardContainer=document.getElementById('flashcardContainer');const fileInput=document.getElementById('fileInput');const fileUploadZone=document.getElementById('fileUploadZone');const fileSelected=document.getElementById('fileSelected');generateBtn.addEventListener('click',()=>{const inputText=document.getElementById('input').value.trim();if(!inputText){alert('Please enter a topic or notes.');return;}flashcardContainer.innerHTML='';const fakeFlashcards=[{question: 'What is the capital of France?',answer: 'Paris'},{question: 'What is the largest planet?',answer: 'Jupiter'},{question: 'Who discovered gravity?',answer: 'Isaac Newton'}];fakeFlashcards.forEach(({question,answer})=>{const wrapper=document.createElement('div');wrapper.className='flashcard-wrapper w-full h-48';const card=document.createElement('div');card.className='flashcard w-full h-full cursor-pointer relative rounded-xl';card.innerHTML=`<div class="flashcard-inner"><div class="flashcard-front">${question}</div><div class="flashcard-back">${answer}</div></div>`;card.addEventListener('click',()=>{card.classList.toggle('flipped');});wrapper.appendChild(card);flashcardContainer.appendChild(wrapper);});});fileUploadZone.addEventListener('click',()=>fileInput.click());fileUploadZone.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' ')fileInput.click();});fileUploadZone.addEventListener('dragover',(e)=>{e.preventDefault();fileUploadZone.classList.add('dragover');});fileUploadZone.addEventListener('dragleave',(e)=>{fileUploadZone.classList.remove('dragover');});fileUploadZone.addEventListener('drop',(e)=>{e.preventDefault();fileUploadZone.classList.remove('dragover');if(e.dataTransfer.files&&e.dataTransfer.files.length>0){fileInput.files=e.dataTransfer.files;showSelectedFile();fileInput.dispatchEvent(new Event('change'));}});fileInput.addEventListener('change',showSelectedFile);function showSelectedFile(){if(fileInput.files&&fileInput.files.length>0){fileSelected.textContent=fileInput.files[0].name+' selected';fileSelected.style.display='';}else{fileSelected.textContent='';fileSelected.style.display='none';}}fileInput.addEventListener('change',(e)=>{const file=e.target.files[0];if(!file)return;if(file.name.endsWith('.pdf')){const reader=new FileReader();reader.onload=async function(event){const typedarray=new Uint8Array(event.target.result);const pdf=await pdfjsLib.getDocument({data: typedarray}).promise;let textContent='';for(let i=1;i<=pdf.numPages;i++){const page=await pdf.getPage(i);const txt=await page.getTextContent();textContent+=txt.items.map(item=>item.str).join(' ')+'\n';}parseAndDisplayFlashcards(textContent,file.name);};reader.readAsArrayBuffer(file);}else{const reader=new FileReader();reader.onload=function(event){parseAndDisplayFlashcards(event.target.result,file.name);};reader.readAsText(file);}});function parseAndDisplayFlashcards(content,filename){let flashcards=[];if(filename.endsWith('.csv')){const lines=content.split(/\r?\n/);for(const line of lines){const [question,answer]=line.split(',');if(question&&answer)flashcards.push({question: question.trim(),answer: answer.trim()});}}else{const lines=content.split(/\r?\n/);for(let i=0;i<lines.length;i++){const line=lines[i];if(line.includes('|')){const [question,answer]=line.split('|');if(question&&answer)flashcards.push({question: question.trim(),answer: answer.trim()});}else if(line.startsWith('Q:')){const question=line.replace('Q:','').trim();const answerLine=lines[i+1];if(answerLine&&answerLine.startsWith('A:')){const answer=answerLine.replace('A:','').trim();flashcards.push({question,answer});}}}}flashcardContainer.innerHTML='';if(flashcards.length===0){flashcardContainer.innerHTML='<div class="text-red-500">No valid flashcards found in file.</div>';return;}flashcards.forEach(({question,answer})=>{const wrapper=document.createElement('div');wrapper.className='flashcard-wrapper w-full h-48';const card=document.createElement('div');card.className='flashcard w-full h-full cursor-pointer relative rounded-xl';card.innerHTML=`<div class="flashcard-inner"><div class="flashcard-front">${question}</div><div class="flashcard-back">${answer}</div></div>`;card.addEventListener('click',()=>{card.classList.toggle('flipped');});wrapper.appendChild(card);flashcardContainer.appendChild(wrapper);});}