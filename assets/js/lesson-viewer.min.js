const form=document.getElementById('chat-form');const input=document.getElementById('chat-input');const messages=document.getElementById('chat-messages');form.addEventListener('submit',async function(e){e.preventDefault();let userMsg=input.value.trim();if(!userMsg)return;appendMessage(userMsg,'user');input.value='';appendTypingIndicator();try{const response=await fetch("http: method: "POST",headers:{"Content-Type": "application/json"},body: JSON.stringify({message: userMsg})});removeTypingIndicator();const data=await response.json();appendMessage(data.reply||"⚠️ No reply from the server.",'bot');}catch(error){removeTypingIndicator();appendMessage("❌ Error connecting to the chatbot server.",'bot');}});function appendMessage(message,sender){const div=document.createElement('div');div.className=sender==='user' ? 'text-end' : 'text-start';const bubble=document.createElement('div');bubble.className=`chat-bubble ${sender==='user' ? 'chat-user' : 'chat-bot'}`;bubble.textContent=message;div.appendChild(bubble);messages.appendChild(div);messages.scrollTop=messages.scrollHeight;}function appendTypingIndicator(){const div=document.createElement('div');div.className='text-start';div.id='typing-indicator';const bubble=document.createElement('div');bubble.className='chat-bubble chat-bot typing-bubble';bubble.innerHTML=`<span class="dot"></span><span class="dot"></span><span class="dot"></span>`;div.appendChild(bubble);messages.appendChild(div);messages.scrollTop=messages.scrollHeight;}function removeTypingIndicator(){const indicator=document.getElementById('typing-indicator');if(indicator)indicator.remove();}const fullscreenBtn=document.getElementById('fullscreenBtn');const lessonVideo=document.getElementById('lessonVideo');let isFullscreen=false;fullscreenBtn.addEventListener('click',function(){if(!isFullscreen){if(lessonVideo.requestFullscreen){lessonVideo.requestFullscreen();}else if(lessonVideo.webkitRequestFullscreen){lessonVideo.webkitRequestFullscreen();}else if(lessonVideo.msRequestFullscreen){lessonVideo.msRequestFullscreen();}}else{if(document.exitFullscreen){document.exitFullscreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}}});function updateFullscreenBtn(){isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);if(isFullscreen){fullscreenBtn.innerHTML='<i class="fas fa-compress"></i>Exit Fullscreen';}else{fullscreenBtn.innerHTML='<i class="fas fa-expand"></i>Fullscreen';}}document.addEventListener('fullscreenchange',updateFullscreenBtn);document.addEventListener('webkitfullscreenchange',updateFullscreenBtn);document.addEventListener('msfullscreenchange',updateFullscreenBtn);