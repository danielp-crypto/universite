const fileInput=document.getElementById('fileInput');const fileUploadZone=document.getElementById('fileUploadZone');const fileSelected=document.getElementById('fileSelected');const examText=document.getElementById('examText');let uploadedText='';fileUploadZone.addEventListener('click',()=>fileInput.click());fileUploadZone.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' ')fileInput.click();});fileUploadZone.addEventListener('dragover',(e)=>{e.preventDefault();fileUploadZone.classList.add('dragover');});fileUploadZone.addEventListener('dragleave',(e)=>{fileUploadZone.classList.remove('dragover');});fileUploadZone.addEventListener('drop',(e)=>{e.preventDefault();fileUploadZone.classList.remove('dragover');if(e.dataTransfer.files&&e.dataTransfer.files.length>0){fileInput.files=e.dataTransfer.files;showSelectedFile();fileInput.dispatchEvent(new Event('change'));}});fileInput.addEventListener('change',showSelectedFile);function showSelectedFile(){if(fileInput.files&&fileInput.files.length>0){fileSelected.textContent=fileInput.files[0].name+' selected';fileSelected.style.display='';}else{fileSelected.textContent='';fileSelected.style.display='none';}}fileInput.addEventListener('change',(e)=>{const file=e.target.files[0];if(!file)return;if(file.name.endsWith('.pdf')){const reader=new FileReader();reader.onload=async function(event){const typedarray=new Uint8Array(event.target.result);const pdf=await pdfjsLib.getDocument({data: typedarray}).promise;let textContent='';for(let i=1;i<=pdf.numPages;i++){const page=await pdf.getPage(i);const txt=await page.getTextContent();textContent+=txt.items.map(item=>item.str).join(' ')+'\n';}uploadedText=textContent;examText.value=textContent;};reader.readAsArrayBuffer(file);}else{const reader=new FileReader();reader.onload=function(event){uploadedText=event.target.result;examText.value=uploadedText;};reader.readAsText(file);}});document.getElementById('generateBtn').addEventListener('click',()=>{const text=examText.value.trim();const num=parseInt(document.getElementById('numQuestions').value,10);const output=document.getElementById('examOutput');output.innerHTML='';if(!text||isNaN(num)||num<1||num>50){alert('Please paste text or upload a file,and enter a valid number of questions.');return;}for(let i=1;i<=num;i++){const question=`Q${i}: What is a key point from your material?`;const answer=`Answer: This is a sample answer for question ${i}.`;const card=document.createElement('div');card.className='question-card';card.innerHTML=`<h3>${question}</h3><p>${answer}</p>`;output.appendChild(card);}});